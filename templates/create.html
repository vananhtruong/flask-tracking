<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√™m s·∫£n ph·∫©m m·ªõi - Truy xu·∫•t Ngu·ªìn g·ªëc</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="{{ url_for('main.index') }}" class="navbar-brand">üå± Truy xu·∫•t Ngu·ªìn g·ªëc</a>
            <div class="navbar-actions">
                {% if user %}
                    <span style="color: var(--primary-color); font-weight: 600;">üë§ {{ user.full_name }}</span>
                    <a href="{{ url_for('auth.profile') }}" class="btn btn-secondary btn-small">Th√¥ng tin</a>
                    <a href="{{ url_for('products.manage') }}" class="btn btn-secondary btn-small">Qu·∫£n l√Ω</a>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary btn-small">ƒêƒÉng xu·∫•t</a>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="btn btn-secondary btn-small">ƒêƒÉng nh·∫≠p</a>
                    <a href="{{ url_for('auth.register') }}" class="btn btn-primary btn-small">ƒêƒÉng k√Ω</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <div class="container">
        <header>
            <h1>üå± Th√™m s·∫£n ph·∫©m m·ªõi</h1>
            <p class="subtitle">Nh·∫≠p th√¥ng tin s·∫£n ph·∫©m ƒë·ªÉ t·∫°o m√£ QR truy xu·∫•t ngu·ªìn g·ªëc</p>
        </header>

        <main>
            <div class="form-container">
                {% if error %}
                <div class="alert alert-error">
                    ‚ö†Ô∏è {{ error }}
                </div>
                {% endif %}

                <form method="POST" action="{{ url_for('products.create') }}" class="product-form" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <div class="form-group">
                        <label for="product_name">T√™n s·∫£n ph·∫©m <span class="required">*</span></label>
                        <input 
                            type="text" 
                            id="product_name" 
                            name="product_name" 
                            required 
                            placeholder="V√≠ d·ª•: L√∫a gi·ªëng ST25"
                            class="form-input"
                        >
                    </div>

                    <div class="form-group">
                        <label for="farmer_name">H·ªô n√¥ng d√¢n s·∫£n xu·∫•t <span class="required">*</span></label>
                        <input 
                            type="text" 
                            id="farmer_name" 
                            name="farmer_name" 
                            value="{{ user.full_name if user else '' }}"
                            readonly
                            class="form-input"
                            style="background-color: #f5f5f5; cursor: not-allowed;"
                        >
                    </div>

                    <div class="form-group">
                        <label>üåø Lo·∫°i c√¢y tr·ªìng</label>
                        <div class="plant-type-selector">
                            <label class="plant-type-option">
                                <input 
                                    type="radio" 
                                    name="plant_type" 
                                    value="seasonal" 
                                    checked
                                    onchange="updateDateLabels()"
                                >
                                <span class="plant-type-label">
                                    <span class="plant-type-icon">üåæ</span>
                                    <span class="plant-type-text">C√¢y th·ªùi v·ª•</span>
                                    <span class="plant-type-hint">L√∫a, rau, ng√¥, ƒë·∫≠u...</span>
                                </span>
                            </label>
                            <label class="plant-type-option">
                                <input 
                                    type="radio" 
                                    name="plant_type" 
                                    value="perennial"
                                    onchange="updateDateLabels()"
                                >
                                <span class="plant-type-label">
                                    <span class="plant-type-icon">üå≥</span>
                                    <span class="plant-type-text">C√¢y l√¢u nƒÉm</span>
                                    <span class="plant-type-hint">Cam, xo√†i, s·∫ßu ri√™ng...</span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="planting_date" id="planting_date_label">üå± Ng√†y tr·ªìng</label>
                            <input 
                                type="date" 
                                id="planting_date" 
                                name="planting_date" 
                                class="form-input"
                            >
                        </div>

                        <div class="form-group">
                            <label for="harvest_date">‚úÇÔ∏è Ng√†y thu ho·∫°ch</label>
                            <input 
                                type="date" 
                                id="harvest_date" 
                                name="harvest_date" 
                                class="form-input"
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="production_area">Khu v·ª±c s·∫£n xu·∫•t</label>
                        <input 
                            type="text" 
                            id="production_area" 
                            name="production_area" 
                            placeholder="V√≠ d·ª•: X√£ An Ph√∫, Huy·ªán C·∫ßn ƒê∆∞·ªõc, Long An"
                            class="form-input"
                        >
                    </div>

                    <div class="form-group">
                        <label for="production_process">Quy tr√¨nh s·∫£n xu·∫•t</label>
                        <textarea 
                            id="production_process" 
                            name="production_process" 
                            rows="5" 
                            placeholder="M√¥ t·∫£ quy tr√¨nh s·∫£n xu·∫•t, chƒÉm s√≥c..."
                            class="form-input"
                        ></textarea>
                    </div>

                    <div class="form-group">
                        <label for="production_files">üì∏ Video/H√¨nh ·∫£nh qu√° tr√¨nh s·∫£n xu·∫•t</label>
                        <input 
                            type="file" 
                            id="production_files" 
                            name="production_files" 
                            multiple
                            accept="image/*,video/*"
                            class="form-input"
                        >
                        <small class="form-hint">C√≥ th·ªÉ ch·ªçn nhi·ªÅu file. H·ªó tr·ª£: JPG, PNG, GIF, MP4, MOV, AVI (t·ªëi ƒëa 100MB/file)</small>
                    </div>

                    <div class="form-group">
                        <label for="harvest_process">Qu√° tr√¨nh thu ho·∫°ch</label>
                        <textarea 
                            id="harvest_process" 
                            name="harvest_process" 
                            rows="5" 
                            placeholder="M√¥ t·∫£ qu√° tr√¨nh thu ho·∫°ch, ph∆∞∆°ng ph√°p thu ho·∫°ch, th·ªùi ƒëi·ªÉm thu ho·∫°ch..."
                            class="form-input"
                        ></textarea>
                    </div>

                    <div class="form-group">
                        <label for="harvest_files">üì∏ Video/H√¨nh ·∫£nh qu√° tr√¨nh thu ho·∫°ch</label>
                        <input 
                            type="file" 
                            id="harvest_files" 
                            name="harvest_files" 
                            multiple
                            accept="image/*,video/*"
                            class="form-input"
                        >
                        <small class="form-hint">C√≥ th·ªÉ ch·ªçn nhi·ªÅu file. H·ªó tr·ª£: JPG, PNG, GIF, MP4, MOV, AVI (t·ªëi ƒëa 100MB/file)</small>
                    </div>

                    <div class="form-group">
                        <label for="storage_method">C√°ch b·∫£o qu·∫£n</label>
                        <textarea 
                            id="storage_method" 
                            name="storage_method" 
                            rows="5" 
                            placeholder="M√¥ t·∫£ c√°ch b·∫£o qu·∫£n s·∫£n ph·∫©m, nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, th·ªùi gian b·∫£o qu·∫£n..."
                            class="form-input"
                        ></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">
                            üì± T·∫°o m√£ QR v√† L∆∞u s·∫£n ph·∫©m
                        </button>
                        <a href="{{ url_for('main.index') }}" class="btn btn-secondary">H·ªßy</a>
                    </div>
                </form>
            </div>
        </main>

        <footer>
            <a href="{{ url_for('main.index') }}" class="btn btn-link">‚Üê Quay l·∫°i trang ch·ªß</a>
        </footer>
    </div>

    <script>
        function updateDateLabels() {
            const plantType = document.querySelector('input[name="plant_type"]:checked').value;
            const plantingDateLabel = document.getElementById('planting_date_label');
            
            if (plantType === 'perennial') {
                plantingDateLabel.innerHTML = 'üå∏ Ng√†y ra hoa';
            } else {
                plantingDateLabel.innerHTML = 'üå± Ng√†y tr·ªìng';
            }
        }
    </script>
</body>
</html>

